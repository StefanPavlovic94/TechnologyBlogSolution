@model TechnologyBlogSolution.ViewModels.SubjectModels.DetailsSubjectView

@{
    ViewBag.Title = "Posts";
}
<div style="text-align:center"><h3>@Model.Name</h3></div>
<div>@Model.Description</div>
<hr />

@using (Html.BeginForm("SeedPosts", "Seeder", FormMethod.Post))
{
<input hidden="hidden" name="SubjectId" value="@Model.Id" />
    <label for="num-of-posts">Number of posts</label>
    <input id="num-of-posts" type="number" class="form-control" name="NumberOfPosts" min="0" />

    <input type="submit" value="Seed" class="btn btn-success" />
}

<div id="posts-container" class="row">

</div>
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>
    $(document).ready(function () {
        getSubjectsPosts(@Model.Id, 0);
    });

    function getSubjectsPosts(subjectId ,pageNumber)
    {
        $.ajax({
            "url": "/Post/PostsPartialPage/",
            "dataType": 'html',
            "data": { subjectId : subjectId, pageNumber : pageNumber },
            success: function (postsPartialPage)
            {
                $("#posts-container").html(postsPartialPage);
            }
        })
    }

    function getPostsForPage(pageNumber)
    {
        getSubjectsPosts(@Model.Id, pageNumber);
    }
</script>